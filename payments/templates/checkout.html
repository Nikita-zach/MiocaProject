{% load static %}
<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="robots" content="index, follow" />
    <title>Mioca - Handmade Goods eCommerce HTML Template</title>
    <meta name="description" content="Mioca - Handmade Goods eCommerce HTML Template" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    
    <!-- Add site Favicon -->
    <link rel="shortcut icon" href="{% static 'images/favicon/favicon.ico' %}" type="image/png">
    
    <!-- vendor css (Icon Font) -->
    <link rel="stylesheet" href="{% static 'css/vendor/bootstrap.bundle.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/vendor/pe-icon-7-stroke.css' %}" />
    <link rel="stylesheet" href="{% static 'css/vendor/font.awesome.css' %}" />
    
    <!-- plugins css (All Plugins Files) -->
    <link rel="stylesheet" href="{% static 'css/plugins/animate.css' %}" />
    <link rel="stylesheet" href="{% static 'css/plugins/swiper-bundle.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/plugins/jquery-ui.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/plugins/nice-select.css' %}" />
    <link rel="stylesheet" href="{% static 'css/plugins/venobox.css' %}" />
    
    <!-- Use the minified version files listed below for better performance and remove the files listed above -->
    <link rel="stylesheet" href="{% static 'css/vendor/vendor.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/plugins/plugins.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style.min.css' %}"> -->
    
    <!-- Main Style -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />

</head>

<body>


    {% include 'includes/header.html' %}

    <!-- checkout area start -->
    <div class="checkout-area pt-100px pb-100px">
        <div class="container">
            <div class="row">
                <div class="col-lg-7">
                    <div class="billing-info-wrap">
                        <h3>Billing Details</h3>
                        <div class="row">
                            {% if user.is_authenticated %}
                                <!-- Fields for authenticated users -->
                                <div class="col-lg-6 col-md-6">
                                    <div class="billing-info mb-4">
                                        <label>Username</label>
                                        <input type="text" name="username" value="{{ request.user.username }}" readonly />
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    <div class="billing-info mb-4">
                                        <label>Email Address</label>
                                        <input type="email" name="email" value="{{ request.user.email }}" readonly />
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    <div class="billing-info mb-4">
                                        <label>First Name</label>
                                        <input type="text" name="first_name" value="{{ request.user.first_name }}" readonly />
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    <div class="billing-info mb-4">
                                        <label>Last Name</label>
                                        <input type="text" name="last_name" value="{{ request.user.last_name }}" readonly />
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="billing-info mb-4">
                                        <label>Address</label>
                                        <input type="text" name="address" value="{{ request.user.address }}" readonly />
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="billing-info mb-4">
                                        <label>City</label>
                                        <input type="text" name="city" value="{{ request.user.city }}" readonly />
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="billing-info mb-4">
                                        <label>Country</label>
                                        <input type="text" name="country" value="{{ request.user.country }}" readonly />
                                    </div>
                                </div>
                            {% else %}
                                <!-- Fields for unauthenticated users -->
                                <form method="POST" action="{% url 'checkout' %}">
                                    {% csrf_token %}
                                    <div class="col-lg-6 col-md-6">
                                        <div class="billing-info mb-4">
                                            <label>Username</label>
                                            <input type="text" name="username" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <div class="billing-info mb-4">
                                            <label>Email Address</label>
                                            <input type="email" name="email" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <div class="billing-info mb-4">
                                            <label>Password</label>
                                            <input type="password" name="password" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <div class="billing-info mb-4">
                                            <label>First Name</label>
                                            <input type="text" name="first_name" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <div class="billing-info mb-4">
                                            <label>Last Name</label>
                                            <input type="text" name="last_name" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="billing-info mb-4">
                                            <label>Address</label>
                                            <input type="text" name="address" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="billing-info mb-4">
                                            <label>City</label>
                                            <input type="text" name="city" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="billing-info mb-4">
                                            <label>Country</label>
                                            <input type="text" name="country" required />
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <button type="submit" class="btn btn-primary">Register</button>
                                    </div>
                                </form>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="col-lg-5 mt-md-30px mt-lm-30px">
                    <div class="your-order-area">
                        <h3>Your Order</h3>
                        <div class="your-order-wrap gray-bg-4">
                            <div class="your-order-product-info">
                                <div class="your-order-top">
                                    <ul>
                                        <li>Product</li>
                                        <li>Total</li>
                                    </ul>
                                </div>
                                <div class="your-order-middle">
                                    <ul>
                                        {% for item in order_items %}
                                            <li>
                                                <span class="order-middle-left">{{ item.product.name }} X {{ item.quantity }}</span>
                                                <span class="order-price">{{ item.product.final_price|floatformat:2 }} $</span>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                                <div class="your-order-bottom">
                                    <ul>
                                        <li class="order-subtotal">Subtotal</li>
                                        <li class="order-subtotal-price">{{ total_price|floatformat:2 }} $</li>
                                    </ul>
                                </div>
                                <div class="your-order-bottom">
                                    <ul>
                                        <li class="order-shipping">Shipping</li>
                                        <li class="order-shipping-price">{{ shipping_cost|floatformat:2 }} $</li>
                                    </ul>
                                </div>
                                <div class="your-order-bottom">
                                    <ul>
                                        <li class="order-total">Total</li>
                                        <li class="order-total-price">{{ total_price|add:shipping_cost|floatformat:2 }} $</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <form method="POST" id="order-form" action="{% url 'checkout' %}">
                            {% csrf_token %}
                            <div class="payment-method">
                                <h4>Select Payment Method</h4>
                                <div class="payment-accordion">
                                    <div class="card">
                                        <div class="card-header" id="headingOne">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                    Bank Transfer
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                                            <div class="card-body">
                                                <p>Bank account details will be sent to you via email after the order is confirmed.</p>
                                                {{ order_form.card_number.label }}: <input type="text" name="card_number" required />
                                                {{ order_form.expiry_date.label }}: <input type="text" name="expiry_date" required />
                                                {{ order_form.cvv.label }}: <input type="text" name="cvv" required />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingTwo">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                    PayPal
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                                            <div class="card-body">
                                                <p>Pay easily through your PayPal account.</p>
                                                {{ order_form.paypal_email.label }}: <input type="email" name="paypal_email" required />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingThree">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                    Cash on Delivery
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                                            <div class="card-body">
                                                <p>Pay cash when your order is delivered.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-success">Place Order</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- checkout area end -->


    {% include 'includes/footer.html' %}

    <!-- Global Vendor, plugins JS -->

    <!-- Vendor JS -->
    <script src="{% static 'js/vendor/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/vendor/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/vendor/jquery-migrate-3.3.0.min.js' %}"></script>
    <script src="{% static 'js/vendor/modernizr-3.11.2.min.js' %}"></script>

    <!-- Plugins JS -->
    <script src="{% static 'js/plugins/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'js/plugins/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/plugins/jquery.nice-select.min.js' %}"></script>
    <script src="{% static 'js/plugins/countdown.js' %}"></script>
    <script src="{% static 'js/plugins/scrollup.js' %}"></script>
    <script src="{% static 'js/plugins/jquery.zoom.min.js' %}"></script>
    <script src="{% static 'js/plugins/venobox.min.js' %}"></script>
    <script src="{% static 'js/plugins/ajax-mail.js' %}"></script>

    <!-- Use the minified version files listed below for better performance and remove the files listed above -->
    <!-- <script src="{% static 'js/vendor/vendor.min.js' %}"></script>
    <script src="{% static 'js/plugins/plugins.min.js' %}"></script> -->

    <!-- Main Js -->
    <script src="{% static 'js/main.js' %}"></script>

</body>

</html>